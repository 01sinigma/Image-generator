# Image Generator - –õ–æ–∫–∞–ª—å–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π:
- **Z-Image-Turbo** ‚Äî –º–æ—â–Ω–∞—è –º–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å 6 –º–∏–ª–ª–∏–∞—Ä–¥–∞–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **Qwen-Image-Edit-2511** ‚Äî –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Z-Image-Turbo)
- üé® **–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ**: –§–æ—Ç–æ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–º —ç—Å—Ç–µ—Ç–∏—á–µ—Å–∫–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º
- ‚ö°Ô∏è **–ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: –ú–µ–Ω–µ–µ —Å–µ–∫—É–Ω–¥—ã –Ω–∞ GPU H800, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏—Ö GPU —Å 16GB VRAM
- üåê **–î–≤—É—è–∑—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç**: –¢–æ—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- üñºÔ∏è **–ì–∏–±–∫–∏–µ —Ä–∞–∑–º–µ—Ä—ã**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ—Ç 512x512 –¥–æ 2048x2048

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Qwen-Image-Edit-2511)
- ‚úèÔ∏è **–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- üë• **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π**: –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- üé® **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ LoRA**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö LoRA –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- üè≠ **–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω**: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ü–∏–∏
- üìê **–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑**: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### –û–±—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üéõÔ∏è **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üîÑ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏**: –õ–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏
- üåê **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –£–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –±–∞–∑–µ Gradio —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
- üíª **CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python**: 3.8 –∏–ª–∏ –≤—ã—à–µ
- **CUDA**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è GPU —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CUDA (–º–∏–Ω–∏–º—É–º 16GB VRAM –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã)
- **–û–°**: Windows, Linux, macOS

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
cd "C:\Work Projeckt\TEst\Image generator"
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/macOS
source venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–í–∞–∂–Ω–æ**: –û–±–µ –º–æ–¥–µ–ª–∏ —Ç—Ä–µ–±—É—é—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `diffusers` –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ GitHub:

```bash
pip install git+https://github.com/huggingface/diffusers
pip install -r requirements.txt
```

### 4. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏. –î–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏:

```bash
pip install -U huggingface_hub

# Z-Image-Turbo
HF_XET_HIGH_PERFORMANCE=1 hf download Tongyi-MAI/Z-Image-Turbo

# Qwen-Image-Edit-2511
hf download Qwen/Qwen-Image-Edit-2511
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Gradio)

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```bash
python app.py
```

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:7860`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:**

#### –í–∫–ª–∞–¥–∫–∞ "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"
- –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ (Z-Image-Turbo)
- –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (512-2048px)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —à–∞–≥–æ–≤ (1-50)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ guidance scale
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ seed –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏
- –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º–ø—Ç–æ–≤

#### –í–∫–ª–∞–¥–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"
- –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ (Qwen-Image-Edit-2511)
- –ó–∞–≥—Ä—É–∑–∫–∞ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –¥–≤—É—Ö –≤—Ö–æ–¥–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (steps, guidance, true_cfg_scale)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ seed –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏

### CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

#### –ë–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

```bash
python cli.py "A beautiful sunset over mountains"
```

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –≤—ã–±–æ—Ä–æ–º –º–æ–¥–µ–ª–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```bash
python cli.py "A cat wearing sunglasses" --model z-image-turbo --width 1024 --height 1024 --seed 42 --steps 9
```

#### –ü–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

```bash
python cli.py "Prompt 1" "Prompt 2" "Prompt 3" --batch
```

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```bash
python cli.py --edit "Combine two characters" --image input1.png --model qwen-image-edit
```

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤—É—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```bash
python cli.py --edit "Two bears facing each other" --image input1.png --image2 input2.png --model qwen-image-edit
```

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```bash
python cli.py --edit "Prompt" --image img1.png --image2 img2.png --model qwen-image-edit --steps 40 --true-cfg-scale 4.0
```

#### –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã CLI

```bash
python cli.py --help
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã CLI:**

*–û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:*
- `prompts` - –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)
- `--model` - –¢–∏–ø –º–æ–¥–µ–ª–∏: `z-image-turbo` –∏–ª–∏ `qwen-image-edit` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
- `--config` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: config.yaml)
- `--output-dir` - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `--output-name` - –ò–º—è —Ñ–∞–π–ª–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞)
- `--verbose` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤

*–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:*
- `--width` - –®–∏—Ä–∏–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `--height` - –í—ã—Å–æ—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `--steps` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
- `--guidance-scale` - –ú–∞—Å—à—Ç–∞–± guidance (0.0 –¥–ª—è Turbo –º–æ–¥–µ–ª–µ–π)
- `--seed` - –°–ª—É—á–∞–π–Ω–æ–µ –∑–µ—Ä–Ω–æ
- `--batch` - –ü–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

*–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:*
- `--edit` - –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `--image` - –ü—É—Ç—å –∫ –≤—Ö–æ–¥–Ω–æ–º—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑)
- `--image2` - –ü—É—Ç—å –∫–æ –≤—Ç–æ—Ä–æ–º—É –≤—Ö–æ–¥–Ω–æ–º—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `--negative-prompt` - –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- `--true-cfg-scale` - True CFG Scale –¥–ª—è Qwen-Image-Edit
- `--num-images-per-prompt` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –ø—Ä–æ–º–ø—Ç

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Python API)

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```python
from generator import ZImageGenerator

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ Z-Image-Turbo
generator = ZImageGenerator(model_type='z-image-turbo')

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
image = generator.generate(
    prompt="Young Chinese woman in red Hanfu, intricate embroidery",
    height=1024,
    width=1024,
    num_inference_steps=9,
    guidance_scale=0.0,
    seed=42,
    save_path="outputs/generated.png"
)
```

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```python
from generator import ZImageGenerator
from PIL import Image

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ Qwen-Image-Edit
editor = ZImageGenerator(model_type='qwen-image-edit')

# –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
image1 = Image.open("input1.png")
image2 = Image.open("input2.png")  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
edited_image = editor.edit(
    images=[image1, image2],
    prompt="The magician bear is on the left, the alchemist bear is on the right",
    negative_prompt=" ",
    num_inference_steps=40,
    guidance_scale=1.0,
    true_cfg_scale=4.0,
    seed=42,
    save_path="outputs/edited.png"
)
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `config.yaml`:

```yaml
# –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
default_model: "z-image-turbo"  # z-image-turbo, qwen-image-edit

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π
models:
  # Z-Image-Turbo - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  z-image-turbo:
    name: "Tongyi-MAI/Z-Image-Turbo"
    torch_dtype: "bfloat16"  # bfloat16, float16, float32
    low_cpu_mem_usage: false
  
  # Qwen-Image-Edit-2511 - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  qwen-image-edit:
    name: "Qwen/Qwen-Image-Edit-2511"
    torch_dtype: "bfloat16"  # bfloat16, float16, float32
    low_cpu_mem_usage: false
    edit:
      default_num_inference_steps: 40
      default_guidance_scale: 1.0
      default_true_cfg_scale: 4.0
      default_num_images_per_prompt: 1

device:
  type: "cuda"  # cuda, cpu, auto
  enable_cpu_offload: false  # –î–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç—å—é

optimization:
  attention_backend: "sdpa"  # sdpa, flash, _flash_3
  compile_model: false  # –ö–æ–º–ø–∏–ª—è—Ü–∏—è –º–æ–¥–µ–ª–∏ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
  enable_flash_attention: false

generation:
  default_height: 1024
  default_width: 1024
  default_num_inference_steps: 9  # 8 DiT forwards –¥–ª—è Turbo
  default_guidance_scale: 0.0  # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å 0 –¥–ª—è Turbo –º–æ–¥–µ–ª–µ–π
  default_seed: null

output:
  directory: "outputs"
  format: "png"  # png, jpg
  quality: 95

web_interface:
  port: 7860
  share: false
  title: "Image Generator"
  description: "–õ–æ–∫–∞–ª—å–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"
```

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–ª—è GPU —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç—å—é

1. –í–∫–ª—é—á–∏—Ç–µ CPU offloading –≤ `config.yaml`:
```yaml
device:
  enable_cpu_offload: true
```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ float16 –≤–º–µ—Å—Ç–æ bfloat16:
```yaml
model:
  torch_dtype: "float16"
```

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏

1. –í–∫–ª—é—á–∏—Ç–µ Flash Attention (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è):
```yaml
optimization:
  enable_flash_attention: true
  attention_backend: "flash"  # –∏–ª–∏ "_flash_3"
```

2. –í–∫–ª—é—á–∏—Ç–µ –∫–æ–º–ø–∏–ª—è—Ü–∏—é –º–æ–¥–µ–ª–∏:
```yaml
optimization:
  compile_model: true
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ —Å –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Image generator/
‚îú‚îÄ‚îÄ generator.py          # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ app.py               # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Gradio)
‚îú‚îÄ‚îÄ cli.py               # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ config.yaml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ .gitignore          # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ outputs/            # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "CUDA out of memory"

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 768x768 –≤–º–µ—Å—Ç–æ 1024x1024)
2. –í–∫–ª—é—á–∏—Ç–µ CPU offloading –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ float16 –≤–º–µ—Å—Ç–æ bfloat16

### –û—à–∏–±–∫–∞: "ModuleNotFoundError: No module named 'diffusers'"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip install git+https://github.com/huggingface/diffusers
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ CPU

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPU –¥–ª—è –ø—Ä–∏–µ–º–ª–µ–º–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏. –ù–∞ CPU –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.

### –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ Hugging Face)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ (~12GB –¥–ª—è –º–æ–¥–µ–ª–∏)
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª—å (—Å–º. —Ä–∞–∑–¥–µ–ª –£—Å—Ç–∞–Ω–æ–≤–∫–∞)

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Z-Image**: [Tongyi-MAI/Z-Image](https://github.com/Tongyi-MAI/Z-Image)
- **Hugging Face Model**: [Tongyi-MAI/Z-Image-Turbo](https://huggingface.co/Tongyi-MAI/Z-Image-Turbo)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Diffusers**: [Hugging Face Diffusers](https://github.com/huggingface/diffusers)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å Z-Image. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –ª–∏—Ü–µ–Ω–∑–∏–µ–π –º–æ–¥–µ–ª–∏ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–ü—Ä–æ–µ–∫—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞:
- **Z-Image Team** - –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ Z-Image
- **Hugging Face** - –∑–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫—É Diffusers
- **Gradio** - –∑–∞ —É–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## üìù –¶–∏—Ç–∞—Ç—ã

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Z-Image –≤ —Å–≤–æ–∏—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ:

```bibtex
@article{team2025zimage,
  title={Z-Image: An Efficient Image Generation Foundation Model with Single-Stream Diffusion Transformer},
  author={Z-Image Team},
  journal={arXiv preprint arXiv:2511.22699},
  year={2025}
}
```

---

**–ü—Ä–∏—è—Ç–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏! üé®**

